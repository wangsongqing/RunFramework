var defaults={selector:"#lottery",width:4,height:4,initSpeed:300,speed:0,upStep:50,upMax:50,downStep:30,downMax:500,waiting:3e3,index:0,target:7,isRunning:!1},lottery={lottery:function(t){this.options=$.extend(!0,defaults,t),this.options.speed=this.options.initSpeed,this.container=$(this.options.selector),this._setup()},_setup:function(){for(var t=0;t<this.options.width;++t)this.container.find(".lottery-group:first .lottery-unit:eq("+t+")").attr("lottery-unit-index",t);for(var t=lottery._count()-this.options.height+1,o=0,i=this.options.width+this.options.height-2;t>=i;--t,++o)this.container.find(".lottery-group:last .lottery-unit:eq("+o+")").attr("lottery-unit-index",t);for(var t=1,i=this.options.height-2;i>=t;++t)this.container.find(".lottery-group:eq("+t+") .lottery-unit:first").attr("lottery-unit-index",lottery._count()-t),this.container.find(".lottery-group:eq("+t+") .lottery-unit:last").attr("lottery-unit-index",this.options.width+t-1);this._enable()},_enable:function(){this.container.find("a").bind("click",this.beforeRoll)},_disable:function(){this.container.find("a").unbind("click",this.beforeRoll)},_up:function(){var t=this;t.options.speed<=t.options.upMax?t._constant():(t.options.speed-=t.options.upStep,t.upTimer=setTimeout(function(){t._up()},t.options.speed))},_constant:function(){var t=this;clearTimeout(t.upTimer),setTimeout(function(){t.beforeDown()},t.options.waiting)},beforeDown:function(){var t=this;t.aim(),t.options.beforeDown&&t.options.beforeDown.call(t),t._down()},_down:function(){var t=this;t.options.speed>t.options.downMax&&t.options.target==t._index()?t._stop():(t.options.speed+=t.options.downStep,t.downTimer=setTimeout(function(){t._down()},t.options.speed))},_stop:function(){var t=this;clearTimeout(t.downTimer),clearTimeout(t.rollerTimer),t.options.speed=t.options.initSpeed,t.options.isRunning=!1,t._enable(),t.options._stop&&t.options._stop.call(t)},beforeRoll:function(){var t=lottery;t._disable(),t.options.beforeRoll?t.options.beforeRoll.call(t):t._roll()},_roll:function(){var t=this;t.container.find("[lottery-unit-index="+t._index()+"]").removeClass("active"),++t.options.index,t.container.find("[lottery-unit-index="+t._index()+"].lottery-unit").addClass("active"),t.rollerTimer=setTimeout(function(){t._roll()},t.options.speed),t.options.isRunning||(t._up(),t.options.isRunning=!0),t.options._roll&&t.options._roll.call(t)},_index:function(){return this.options.index%this._count()},_count:function(){return this.options.width*this.options.height-(this.options.width-2)*(this.options.height-2)},aim:function(){this.options.aim?this.options.aim.call(this):(this.options.target=parseInt(parseInt(10*Math.random())*this._count()/10),console.log(this.options.target))}};